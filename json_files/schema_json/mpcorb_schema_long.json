{
    "$schema": "http://json-schema.org/schema#",
    "title":"Best Fit Orbit Data for Single Solar System Object",
    "description":"Standardized JSON orbit exchange format. Designed to communicate the best-fit orbit for a single minor planet or comet. The precursor to this schema was bootstrapped using a function *create_mpcorb_schema_from_defining_sample_json* function to create an initial working schema. Subsequent to that, extensive by-hand revisions have been made by MJP & FS. As such, this json should now be regarded as the defining schema, with 'bootstapping' no longer being required / allowed.",
    "required": [
        "CAR",
        "COM",
        "system_data",
        "designation_data",
        "orbit_fit_statistics",
        "nongrav_data",
        "magnitude_data",
        "epoch_data"
    ],
    "properties": {
        "CAR": {
            "description" : "Cartesian Element Specification: Description of the best-fit orbit based on a cartesian coordinate system (plus any non-gravs). Contains the best-fit orbit and covariance matrix.",
            "properties": {
                "element_units" : {
                    "description" : "Physical Units associated with cartesian orbital elements ",
                    "type": "object",
                    "properties": {
                        "posn": {
                            "type": "string",
                            "enum": ["au"]
                        },
                        "vel": {
                            "type": "string",
                            "enum": ["au/day"]
                        },
                    },
                    "required": ["posn","vel"]
                },
                "non_grav_units" : {
                    "description" : "Physical Units associated with non-gravitational fit-parameters ",
                    "type": "object",
                    "properties": {
                        "yarkovsky": {
                            "type": "string",
                            "enum": ["???"]
                        },
                        "srp": {
                            "type": "string",
                            "enum": ["???"]
                        },
                        "A1": {
                            "type": "string",
                            "enum": ["???"]
                        },
                        "A2": {
                            "type": "string",
                            "enum": ["???"]
                        },
                        "A3": {
                            "type": "string",
                            "enum": ["???"]
                        },
                        "DT": {
                            "type": "string",
                            "enum": ["???"]
                        },                    },
                    "required": [   "yarkovsky",
                                    "srp",
                                    "A1",
                                    "A2",
                                    "A3",
                                    "DT"]
                },
                "eigval": {
                    "description" : "Eigenvalues for the cartesian orbital elements (and any non-gravitational parameters). Of length 6 if gravity-only, or 7-10 if we have non-gravs",
                    "type": "array",
                    "items": {
                        "type": "number"
                    }
                },
                "rms": {  # We want this always to be of length 6: the non-gravs are separate
                    "description" : "RMS values for the cartesian orbital elements (and any non-gravitational parameters). Of length 6 if gravity-only, or 7-10 if we have non-gravs",
                    "type": "array",
                    "items": {
                        "type": "number"
                    }
                },
                "covariance": {
                    "description" : "Covariance matrix elements (upper triangular) for the cartesian orbital elements (and any non-gravitational parameters). Reconstructed square matrix is of size 6x6 if gravity-only, or 7x7 -to- 10x10 if we have non-grav parameters.",
                    "type": "object",
                    "properties": {
                        "cov00": {
                            "type": "number"
                        },
                        "cov01": {
                            "type": "number"
                        },
                        "cov02": {
                            "type": "number"
                        },
                        "cov03": {
                            "type": "number"
                        },
                        "cov04": {
                            "type": "number"
                        },
                        "cov05": {
                            "type": "number"
                        },
                        "cov06": {
                            "type": "number"
                        },
                        "cov07": {
                            "type": "number"
                        },
                        "cov08": {
                            "type": "number"
                        },
                        "cov09": {
                            "type": "number"
                        },
                        "cov11": {
                            "type": "number"
                        },
                        "cov12": {
                            "type": "number"
                        },
                        "cov13": {
                            "type": "number"
                        },
                        "cov14": {
                            "type": "number"
                        },
                        "cov15": {
                            "type": "number"
                        },
                        "cov16": {
                            "type": "number"
                        },
                        "cov17": {
                            "type": "number"
                        },
                        "cov18": {
                            "type": "number"
                        },
                        "cov19": {
                            "type": "number"
                        },

                        "cov22": {
                            "type": "number"
                        },
                        "cov23": {
                            "type": "number"
                        },
                        "cov24": {
                            "type": "number"
                        },
                        "cov25": {
                            "type": "number"
                        },
                        "cov26": {
                            "type": "number"
                        },
                        "cov27": {
                            "type": "number"
                        },
                        "cov28": {
                            "type": "number"
                        },
                        "cov29": {
                            "type": "number"
                        },
                        
                        "cov33": {
                            "type": "number"
                        },
                        "cov34": {
                            "type": "number"
                        },
                        "cov35": {
                            "type": "number"
                        },
                        "cov36": {
                            "type": "number"
                        },
                        "cov37": {
                            "type": "number"
                        },
                        "cov38": {
                            "type": "number"
                        },
                        "cov39": {
                            "type": "number"
                        },
                        
                        "cov44": {
                            "type": "number"
                        },
                        "cov45": {
                            "type": "number"
                        },
                        "cov46": {
                            "type": "number"
                        },
                        "cov47": {
                            "type": "number"
                        },
                        "cov48": {
                            "type": "number"
                        },
                        "cov49": {
                            "type": "number"
                        },
                        
                        "cov55": {
                            "type": "number"
                        },
                        "cov56": {
                            "type": "number"
                        },
                        "cov57": {
                            "type": "number"
                        },
                        "cov58": {
                            "type": "number"
                        },
                        "cov59": {
                            "type": "number"
                        },
                        
                        "cov66": {
                            "type": "number"
                        },
                        "cov67": {
                            "type": "number"
                        },
                        "cov68": {
                            "type": "number"
                        },
                        "cov69": {
                            "type": "number"
                        },
                        "cov77": {
                            "type": "number"
                        },
                        "cov78": {
                            "type": "number"
                        },
                        "cov79": {
                            "type": "number"
                        },
                        "cov88": {
                            "type": "number"
                        },
                        "cov89": {
                            "type": "number"
                        },
                        "cov99": {
                            "type": "number"
                        },
                    },
                    "required": [
                        "cov00",
                        "cov01",
                        "cov02",
                        "cov03",
                        "cov04",
                        "cov05",
                        "cov11",
                        "cov12",
                        "cov13",
                        "cov14",
                        "cov15",
                        "cov22",
                        "cov23",
                        "cov24",
                        "cov25",
                        "cov33",
                        "cov34",
                        "cov35",
                        "cov44",
                        "cov45",
                        "cov55"
                    ]
                },
                "elements": {
                    "description" : "Best fit values for the cartesian orbital elements.",
                    "type": "object",
                    "properties": {
                        "x": {
                            "type": "number"
                        },
                        "y": {
                            "type": "number"
                        },
                        "z": {
                            "type": "number"
                        },
                        "vx": {
                            "type": "number"
                        },
                        "vy": {
                            "type": "number"
                        },
                        "vz": {
                            "type": "number"
                        }
                    },
                    "required": [
                        "vx",
                        "vy",
                        "vz",
                        "x",
                        "y",
                        "z"
                    ]
                },
                "non_grav_coefficients": {
                    "description" : "Best fit values for any non-gravitational elements employed in the fit.",
                    "type": "object",
                    "properties": {
                        "yarkovsky_coeff": {
                            "type": [
                                "null",
                                "number"
                            ]
                        },
                        "srp_coeff": {
                            "type": [
                                "null",
                                "number"
                            ]
                        },
                        "A1_coeff": {
                            "type": [
                                "null",
                                "number"
                            ]
                        },
                        "A2_coeff": {
                            "type": [
                                "null",
                                "number"
                            ]
                        },
                        "A3_coeff": {
                            "type": [
                                "null",
                                "number"
                            ]
                        },
                        "DT_coeff": {
                            "type": [
                                "null",
                                "number"
                            ]
                        }
                    },
                    "required": [
                        "yarkovsky_coeff"
                        "srp_coeff",
                        "A1_coeff",
                        "A2_coeff",
                        "A3_coeff",
                        "DT_coeff",
                    ]
                }
            },
            "required": [
                "eigval",
                "rms",
                "elements",
                "non_grav_coefficients"
                "covariance",
                "element_units",
                "non_grav_units",
            ]
        },
        "COM": {
            "description" : "Description of the best-fit orbit based on the 'cometary' coordinate system (plus any non-gravs). Contains the best-fit orbit and covariance matrix.",
            "properties": {
                "element_units" : {
                    "description" : "Physical Units associated with cartesian orbital elements ",
                    "type": "object",
                    "properties": {
                        "posn": {
                            "type": "string",
                            "enum": ["au"]
                        },
                        "ang": {
                            "type": "string",
                            "enum": ["deg"]
                        },
                    },
                    "required": ["posn","ang"]
                },
                "non_grav_units" : {
                    "description" : "Physical Units associated with non-gravitational fit-parameters ",
                    "type": "object",
                    "properties": {
                        "yarkovsky": {
                            "type": "string",
                            "enum": ["???"]
                        },
                        "srp": {
                            "type": "string",
                            "enum": ["???"]
                        },
                        "A1": {
                            "type": "string",
                            "enum": ["???"]
                        },
                        "A2": {
                            "type": "string",
                            "enum": ["???"]
                        },
                        "A3": {
                            "type": "string",
                            "enum": ["???"]
                        },
                        "DT": {
                            "type": "string",
                            "enum": ["???"]
                        },                    },
                    "required": [   "yarkovsky",
                                    "srp",
                                    "A1",
                                    "A2",
                                    "A3",
                                    "DT"]
                },
                "eigval": {
                    "description" : "Eigenvalues for the cometary orbital elements (and any non-gravitational parameters). Of length 6 if gravity-only, or 7-10 if we have non-gravs.",
                    "type": "array",
                    "items": {
                        "type": "number"
                    }
                },
                "rms": {
                    "description" : "RMS values for the cartesian orbital elements (and any non-gravitational parameters). Of length 6 if gravity-only, or 7-10 if we have non-gravs",
                    "type": "array",
                    "items": {
                        "type": "number"
                    }
                },
                "covariance": {
                    "description" : "Covariance matrix elements (upper triangular) for the cartesian orbital elements (and any non-gravitational parameters). Reconstructed square matrix is of size 6x6 if gravity-only, or 7x7 -to- 10x10 if we have non-grav parameters.",
                    "type": "object",
                    "properties": {
                        "cov00": {
                            "type": "number"
                        },
                        "cov01": {
                            "type": "number"
                        },
                        "cov02": {
                            "type": "number"
                        },
                        "cov03": {
                            "type": "number"
                        },
                        "cov04": {
                            "type": "number"
                        },
                        "cov05": {
                            "type": "number"
                        },
                        "cov06": {
                            "type": "number"
                        },
                        "cov07": {
                            "type": "number"
                        },
                        "cov08": {
                            "type": "number"
                        },
                        "cov09": {
                            "type": "number"
                        },

                        
                        "cov11": {
                            "type": "number"
                        },
                        "cov12": {
                            "type": "number"
                        },
                        "cov13": {
                            "type": "number"
                        },
                        "cov14": {
                            "type": "number"
                        },
                        "cov15": {
                            "type": "number"
                        },
                        "cov16": {
                            "type": "number"
                        },
                        "cov17": {
                            "type": "number"
                        },
                        "cov18": {
                            "type": "number"
                        },
                        "cov19": {
                            "type": "number"
                        },

                        "cov22": {
                            "type": "number"
                        },
                        "cov23": {
                            "type": "number"
                        },
                        "cov24": {
                            "type": "number"
                        },
                        "cov25": {
                            "type": "number"
                        },
                        "cov26": {
                            "type": "number"
                        },
                        "cov27": {
                            "type": "number"
                        },
                        "cov28": {
                            "type": "number"
                        },
                        "cov29": {
                            "type": "number"
                        },
                        
                        "cov33": {
                            "type": "number"
                        },
                        "cov34": {
                            "type": "number"
                        },
                        "cov35": {
                            "type": "number"
                        },
                        "cov36": {
                            "type": "number"
                        },
                        "cov37": {
                            "type": "number"
                        },
                        "cov38": {
                            "type": "number"
                        },
                        "cov39": {
                            "type": "number"
                        },
                        
                        "cov44": {
                            "type": "number"
                        },
                        "cov45": {
                            "type": "number"
                        },
                        "cov46": {
                            "type": "number"
                        },
                        "cov47": {
                            "type": "number"
                        },
                        "cov48": {
                            "type": "number"
                        },
                        "cov49": {
                            "type": "number"
                        },
                        
                        "cov55": {
                            "type": "number"
                        },
                        "cov56": {
                            "type": "number"
                        },
                        "cov57": {
                            "type": "number"
                        },
                        "cov58": {
                            "type": "number"
                        },
                        "cov59": {
                            "type": "number"
                        },
                        
                        "cov66": {
                            "type": "number"
                        },
                        "cov67": {
                            "type": "number"
                        },
                        "cov68": {
                            "type": "number"
                        },
                        "cov69": {
                            "type": "number"
                        },
                        "cov77": {
                            "type": "number"
                        },
                        "cov78": {
                            "type": "number"
                        },
                        "cov79": {
                            "type": "number"
                        },
                        "cov88": {
                            "type": "number"
                        },
                        "cov89": {
                            "type": "number"
                        },
                        "cov99": {
                            "type": "number"
                        },
                    },
                    "required": [
                        "cov00",
                        "cov01",
                        "cov02",
                        "cov03",
                        "cov04",
                        "cov05",
                        "cov11",
                        "cov12",
                        "cov13",
                        "cov14",
                        "cov15",
                        "cov22",
                        "cov23",
                        "cov24",
                        "cov25",
                        "cov33",
                        "cov34",
                        "cov35",
                        "cov44",
                        "cov45",
                        "cov55"
                    ]
                },
                "elements": {
                    "description" : "Best fit values for the cometary orbital elements.",
                    "type": "object",
                    "properties": {
                        "q": {
                            "type": "number"
                        },
                        "e": {
                            "type": "number"
                        },
                        "i": {
                            "type": "number"
                        },
                        "node": {
                            "type": "number"
                        },
                        "argperi": {
                            "type": "number"
                        },
                        "peri_time": {
                            "type": "number"
                        }
                    },
                    "required": [
                        "q",
                        "e",
                        "i",
                        "node",
                        "argperi",
                        "peri_time"
                    ]
                },
                "non_grav_coefficients": {
                    "description" : "Best fit values for any non-gravitational elements employed in the fit.",
                    "type": "object",
                    "properties": {
                        "yarkovsky_coeff": {
                            "type": [
                                "null",
                                "number"
                            ]
                        },
                        "srp_coeff": {
                            "type": [
                                "null",
                                "number"
                            ]
                        },
                        "A1_coeff": {
                            "type": [
                                "null",
                                "number"
                            ]
                        },
                        "A2_coeff": {
                            "type": [
                                "null",
                                "number"
                            ]
                        },
                        "A3_coeff": {
                            "type": [
                                "null",
                                "number"
                            ]
                        },
                        "DT_coeff": {
                            "type": [
                                "null",
                                "number"
                            ]
                        }
                    },
                    "required": [
                        "yarkovsky_coeff"
                        "srp_coeff",
                        "A1_coeff",
                        "A2_coeff",
                        "A3_coeff",
                        "DT_coeff",
                    ]
                }
            },
            "required": [
                "covariance",
                "eigval",
                "elements",
                "rms",
                "element_units",
                "non_grav_units",
                "non_grav_coefficients"
            ]
        },
        "software_data" : {
            "description" : "Details of the software used to perform orbital fit",
            "properties": {
                "software_name": {
                    "type": "string",
                    "enum": ["orbfit"]
                },
                "software_version": { # E.g. v.1.0.a.2
                    "type": "string"
                }
                "run_datetime": { # When was this file made?
                    "type": "string"
                },
            "required": [
                "software_name",
                "software_version",
                "run_datetime"
            ]
        },
        
        "system_data": {
            "description" : "Ephemeris model assumed when integrating the motion of the object, and the frame of reference used to specify the best-fit orbital elements. ",
            "properties": {
                "eph": {
                    "description" : "The ephemeris model used in the orbit-fit, E.g. DE431",
                    "type": "string",
                    "enum": ["DE431","DE441"]
                },
                "refsys": {
                    "description" : "The frame of reference for the best-fit orbital elements",
                    "type": "string",
                    "enum": ["Equatorial","Ecliptic"]
                }
                "refframe": {
                    "description" : "The frame of reference for the best-fit orbital elements",
                    "type": "string",
                    "enum": ["ICRF"]
                },
                "force_model": {
                    # ------------------------------------------
                    # refframe Specification
                    "description" : "The planetary / asteroidal perturbers that were used in the orbit-fit. [need to decide exactly how to popuulate: url-link?]",
                    # ------------------------------------------
                    "type": "string",
                    "enum": ["????"]
                },
                "required": [
                    "eph",
                    "refsys",
                    "refframe",
                    "force_model"
            ]
        },
        "designation_data": {
            "description" : "The designations, numbers and names that may be associated with the object",
            "properties": {
                "permid": {
                    "type": "string"
                },
                "packed_primary_provisional_designation": {
                    "type": "string"
                },
                "unpacked_primary_provisional_designation": {
                    "type": "string"
                },
                "orbfit_name": {
                    "type": "string"
                },
                "packed_secondary_provisional_designations": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "unpacked_secondary_provisional_designations": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "iau_name": {
                    "type": "string"
                }
            },
            "required": [
                "iau_name",
                "orbfit_name",
                "packed_primary_provisional_designation",
                "permid",
                "unpacked_primary_provisional_designation",
                "packed_secondary_provisional_designations",
                "unpacked_secondary_provisional_designations"
            ]
        },
        "orbit_fit_statistics":{
             "description" : "Summary fit statistics associated with the best-fit orbit, the observations used, etc",
            "properties": {
                "sig_to_noise_ratio" : {
                    "description": "SNR of the orbital parameters",
                    "type": "array",
                    "items": {
                        "type": "number"
                    },
                "snr_below_3"         : {
                    "description": "True if any value in the SNR list is <3, False otherwise",
                    "type": "boolean"
                },
                "snr_below_1:"        : {
                    "description": "True if any value in the SNR list is <1, False otherwise",
                    "type": "boolean"
                },
                "U_param"             : {
                    "description": "U parameter per https://minorplanetcenter.net/iau/info/UValue.html",
                    "type": "number"
                },
                "score1"              : {
                    "description": " 1st Meaningless score for numbering ...",
                    "type": "number"
                },
                "score2"              : {
                    "description": " 2nd Meaningless score for numbering ...",
                    "type": "number"
                },
                "orbit_quality"      : {
                    "description": "Orbit quality: good, poor, unreliable, no orbit (def = 'good')",
                    "type": "string"
                },
                "normalized_RMS"     : {
                    "description": "Normalized RMS (def = 0)",
                    "type": "number"
                },
                "not_normalized_RMS" : {
                    "description": "Not normalized RMS (def=0)",
                    "type": "number"
                },
                "nobs_total"       : {
                    "description": "Total number of all observations (optical + radar) available",
                    "type": "number"
                },
                "nobs_total_sel"   : {
                    "description": "Total number of all observations (optical + radar) selected",
                    "type": "number"
                },
                "nobs_optical"       : {
                    "description": "Total number of optical observations available",
                    "type": "number"
                },
                "nobs_optical_sel"   : {
                    "description": "Total number of optical observations selected",
                    "type": "number"
                },
                "nobs_radar"       : {
                    "description": "Total number of radar observations available",
                    "type": "number"
                },
                "nobs_radar_sel"   : {
                    "description": "Total number of radar observations selected",
                    "type": "number"
                },
                "arc_length_total"  : {
                    "description": "Arc length over nobs_total",
                    "type": "number"
                },
                "arc_length_sel"    : {
                    "description": "Arc length over nobs_total_sel",
                    "type": "number"
                },
                "nopp"               : {
                    "description": "Number of oppositions",
                    "type": "number"
                },
                "numparams": {
                    "description": "Number of parameters used for fit: E.g. 6-orbital params plus N-non_grav params",
                    "type": "integer"
                },

        },

        "nongrav_data": {
            "description" : "Booleans to indicate whether any non-gravitational parameters are used in the orbit-fit. The actual fitted values and their covariance properties are reported within the 'CAR' and 'COT' parameter sections.",
            "properties": {
                "non_gravs": {
                    "description" : "Boolean to indicate whether any non-gravitational parameters are used in the orbit-fit.",
                    "type": "boolean"
                },
                "non_grav_booleans": {
                    "description" : "Booleans to indicate which specific non-gravitational parameters are used in the orbit-fit.",
                    "type": "object",
                    "properties": {
                        "yarkovsky": {
                            "type": "boolean"
                        },
                        "srp": {
                            "type": "boolean"
                        },
                        "marsden": {
                            "type": "boolean"
                        },
                        "yc": {
                            "description":"Yoemans & Chodas",
                            "type": "boolean"
                        },
                        "yabushita": {
                            "type": "boolean"
                        },
                        "A1": {
                            "type": "boolean"
                        },
                        "A2": {
                            "type": "boolean"
                        },
                        "A3": {
                            "type": "boolean"
                        },
                        "DT": {
                            "type": "boolean"
                        }
                    },
                    "required": [
                        "yarkovsky",
                        "srp",
                        "marsden",
                        "yc",
                        "yabushita",
                        "A1",
                        "A2",
                        "A3",
                        "DT"
                    ]
                },
                
            },
            "required": [
                "non_gravs",
                "non_grav_booleans",
            ]
        },
        "magnitude_data": {
            "description" : "The absolute magnitude, H, and slope parameter, G, information derived from the fitted orbit in combination with the observed apparent magnitudes. ",
            "properties": {
                "H": {
                    "type": "number"
                },
                "G": {
                    "type": "number"
                },
                "G1": {
                    "type": "number"
                },
                "G2": {
                    "type": "number"
                },
                "G12": {
                    "type": "number"
                },
                "photometric_model" : {
                    "type": "string",
                     "enum": ["????"]
               }
            },
            "required": [
                "photometric_model",
                "H",
                "G"
                ]
        },
        "epoch_data": {
            "description" : "Data concerning the orbit epoch: I.e. The date at which the best-fit orbital coordinates are correct",
            "properties": {
                "timesystem": {
                    "type": "string",
                     "enum": ["TDB","TT"]
                },
                "timeform": {
                    "type": "string",
                    "enum": ["JD","MJD"]
                },
                "epoch": {
                    "type": "number"
                }
            },
            "required": [
                "epoch",
                "timesystem",
                "timeform"
            ]
        }
        "moid_data": {
            "description" : "Calculated MOIDs (Minimum Orbital Interception Distances) at Epoch",
            "properties": {
                "Venus": {
                    "type": "number"
                },
                "Earth": {
                    "type": "number"
                },
                "Mars": {
                    "type": "number"
                },
                "Jupiter": {
                    "type": "number"
                }
                "moid_units" :{
                    "type": "string",
                    "enum": ["au"]
                },
            },
            "required": [
                "Earth",
                "moid_units"
            ]
        }
        "categorization": {
            "description" : "Various different ways to categorize / sub-set orbit / object types",
            "properties": {
                "object_type_str": {
                    "description": "# Minor-Planet / Comet / Dual-Status / Binary MP / ...",
                    "type": "string"
                },
                "object_type_int": {
                    "description": "#     0            10       20          1",
                    "type": "number"
                },
                "orbit_type_str": {
                    "description": "# NEAs / MBAs / TNOs / ...",
                    "type": "string"
                },
                "orbit_type_int": {
                    "description": "# 0 /1/2/3/4",
                    "type": "number"
                },
                "orbit_subtype_str": {
                    "description": "# Apollo / Amor / ...",
                    "type": "string"
                },
                "orbit_subtype_int": {
                    "description": "# ...",
                    "type": "number"
                },
                "parent_planet_str" : {
                    "description": "# For Nat-Sats",
                    "type": "string"
                }
                "parent_planet_int" : {
                    "description": "# For Nat-Sats",
                    "type": "number"
                }
            }
            },
            "required": [
                "object_type_str",
                "object_type_int",
                "orbit_type_str",
                "orbit_type_int",
                "orbit_subtype_str",
                "orbit_subtype_int"
            ]
        }
    },
